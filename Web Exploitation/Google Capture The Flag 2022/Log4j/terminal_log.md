```
$ sudo docker build .
Sending build context to Docker daemon  26.62kB
Step 1/14 : FROM ubuntu:20.04 as chroot
 ---> ba6acccedd29
Step 2/14 : RUN /usr/sbin/useradd --no-create-home -u 1000 user
 ---> Running in 09cd75947d68
Removing intermediate container 09cd75947d68
 ---> 760f65545b6d
Step 3/14 : RUN apt-get update &&     apt-get -y --no-install-recommends install maven python3-pip
 ---> Running in 79502a5c8492
Removing intermediate container 79502a5c8492
 ---> dec3751521e8
Step 4/14 : COPY server /home/user
 ---> eec3227deb8c
Step 5/14 : COPY start.sh /home/user
 ---> 56399cdf8862
Step 6/14 : RUN chmod 755 /home/user/templates
 ---> Running in 3a9603539711
Removing intermediate container 3a9603539711
 ---> 201d44a0b98c
Step 7/14 : RUN pip install -r /home/user/requirements.txt
 ---> Running in b76b980a6c6b
Removing intermediate container b76b980a6c6b
 ---> 02e7a6b02e01
Step 8/14 : COPY chatbot /home/user/chatbot
 ---> 548d8145e6c4
Step 9/14 : WORKDIR /home/user/chatbot
 ---> Running in 5abd7737315a
Removing intermediate container 5abd7737315a
 ---> 212a2394adcb
Step 10/14 : RUN mvn clean package shade:shade
 ---> Running in 3ebe6d54f4a0
[INFO] Including org.apache.logging.log4j:log4j-api:jar:2.17.2 in the shaded jar.
[INFO] Including org.apache.logging.log4j:log4j-core:jar:2.17.2 in the shaded jar.
[INFO] Skipping pom dependency org.apache.logging.log4j:log4j:pom:2.17.2 in the shaded jar.
[INFO] Dependency-reduced POM written at: /home/user/chatbot/dependency-reduced-pom.xml
[WARNING] log4j-api-2.17.2.jar, log4j-core-2.17.2.jar define 3 overlapping resources:
[WARNING]   - META-INF/DEPENDENCIES
[WARNING]   - META-INF/LICENSE
[WARNING]   - META-INF/NOTICE
[WARNING] app-1.0-SNAPSHOT.jar, log4j-api-2.17.2.jar, log4j-core-2.17.2.jar define 1 overlapping resource:
[WARNING]   - META-INF/MANIFEST.MF
[WARNING] maven-shade-plugin has detected that some class files are
[WARNING] present in two or more JARs. When this happens, only one
[WARNING] single version of the class is copied to the uber jar.
[WARNING] Usually this is not harmful and you can skip these warnings,
[WARNING] otherwise try to manually exclude artifacts based on
[WARNING] mvn dependency:tree -Ddetail=true and the above output.
[WARNING] See https://maven.apache.org/plugins/maven-shade-plugin/
[INFO] Replacing original artifact with shaded artifact.
[INFO] Replacing /home/user/chatbot/target/app-1.0-SNAPSHOT.jar with /home/user/chatbot/target/app-1.0-SNAPSHOT-shaded.jar
[INFO] ------------------------------------------------------------------------
[INFO] BUILD SUCCESS
[INFO] ------------------------------------------------------------------------
[INFO] Total time:  35.999 s
[INFO] Finished at: 2022-07-05T00:00:00Z
[INFO] ------------------------------------------------------------------------
Removing intermediate container 3ebe6d54f4a0
 ---> 4b52604aa646
Step 11/14 : FROM gcr.io/kctf-docker/challenge@sha256:d884e54146b71baf91603d5b73e563eaffc5a42d494b1e32341a5f76363060fb
gcr.io/kctf-docker/challenge@sha256:d884e54146b71baf91603d5b73e563eaffc5a42d494b1e32341a5f76363060fb: Pulling from kctf-docker/challenge
ea362f368469: Pull complete
49d41995fa5d: Pull complete
49bbf56fce5f: Pull complete
0f4d19ab34a4: Pull complete
20495c5901e9: Pull complete
9fb92ced1e73: Pull complete
a06c753894de: Pull complete
4dcc137f84db: Pull complete
67a755980815: Pull complete
b9f8a47bd3a1: Pull complete
f39992f3122d: Pull complete
6e2d2ac3a18b: Pull complete
Digest: sha256:d884e54146b71baf91603d5b73e563eaffc5a42d494b1e32341a5f76363060fb
Status: Downloaded newer image for gcr.io/kctf-docker/challenge@sha256:d884e54146b71baf91603d5b73e563eaffc5a42d494b1e32341a5f76363060fb
 ---> c8e23c913f73
Step 12/14 : COPY --from=chroot / /chroot
 ---> 794a7fe403da
Step 13/14 : COPY nsjail.cfg /home/user/
 ---> 90396ccacb18
Step 14/14 : CMD kctf_setup &&     (kctf_drop_privs nsjail --config /home/user/nsjail.cfg -- /bin/bash start.sh)
 ---> Running in 6890268ae287
Removing intermediate container 6890268ae287
 ---> 37c57a6da13e
Successfully built 37c57a6da13e
$ sudo docker run --privileged -p 1337:1337 37c57a6da13e
+ mount -t proc none /kctf/.fullproc/proc
[I][2022-07-05T20:00:02+0000] Mode: STANDALONE_ONCE
[I][2022-07-05T20:00:02+0000] Jail parameters: hostname:'NSJAIL', chroot:'', process:'/bin/bash', bind:[::]:0, max_conns:0, max_conns_per_ip:0, time_limit:0, personality:0, daemonize:false, clone_newnet:false, clone_newuser:true, clone_newns:true, clone_newpid:true, clone_newipc:true, clone_newuts:true, clone_newcgroup:true, clone_newtime:false, keep_caps:false, disable_no_new_privs:false, max_cpus:0
[I][2022-07-05T20:00:02+0000] Mount: '/' flags:MS_RDONLY type:'tmpfs' options:'' dir:true
[I][2022-07-05T20:00:02+0000] Mount: '/chroot' -> '/' flags:MS_RDONLY|MS_BIND|MS_REC|MS_PRIVATE type:'' options:'' dir:true
[I][2022-07-05T20:00:02+0000] Mount: '/dev' -> '/dev' flags:MS_RDONLY|MS_BIND|MS_REC|MS_PRIVATE type:'' options:'' dir:true
[I][2022-07-05T20:00:02+0000] Mount: '/dev/null' -> '/dev/null' flags:MS_BIND|MS_REC|MS_PRIVATE type:'' options:'' dir:false
[I][2022-07-05T20:00:02+0000] Mount: '/etc/resolv.conf' -> '/etc/resolv.conf' flags:MS_RDONLY|MS_BIND|MS_REC|MS_PRIVATE type:'' options:'' dir:false
[I][2022-07-05T20:00:02+0000] Mount: '/tmp' flags: type:'tmpfs' options:'' dir:true
[I][2022-07-05T20:00:02+0000] Mount: '/proc' flags:MS_RDONLY type:'proc' options:'' dir:true
[I][2022-07-05T20:00:02+0000] Uid map: inside_uid:1000 outside_uid:1000 count:1 newuidmap:false
[I][2022-07-05T20:00:02+0000] Gid map: inside_gid:1000 outside_gid:1000 count:1 newgidmap:false
[I][2022-07-05T20:00:02+0000] Executing '/bin/bash' for '[STANDALONE MODE]'
[2022-07-05 00:02:02 +0000] [2] [INFO] Starting gunicorn 20.1.0
[2022-07-05 00:02:02 +0000] [2] [INFO] Listening at: http://0.0.0.0:1337 (2)
[2022-07-05 00:02:02 +0000] [2] [INFO] Using worker: sync
[2022-07-05 00:02:02 +0000] [4] [INFO] Booting worker with pid: 4
[2022-07-05 00:02:02 +0000] [5] [INFO] Booting worker with pid: 5
[2022-07-05 00:02:02 +0000] [6] [INFO] Booting worker with pid: 6
[2022-07-05 00:02:02 +0000] [7] [INFO] Booting worker with pid: 7
$ sudo docker ps
CONTAINER ID   IMAGE          COMMAND                  CREATED          STATUS          PORTS                                       NAMES
f004990cf6a0   37c57a6da13e   "/bin/sh -c 'kctf_se…"   38 seconds ago   Up 37 seconds   0.0.0.0:1337->1337/tcp, :::1337->1337/tcp   confident_shamir
$ sudo docker exec -it f004990cf6a0 bash
root@f004990cf6a0:/#
```