```
$ sudo ./deploy.sh
Building backend
Step 1/14 : FROM ubuntu:20.04
 ---> a0ce5a295b63
Step 2/14 : MAINTAINER how2hack
 ---> Using cache
 ---> b0e4016026ee
Step 3/14 : RUN apt-get update --fix-missing
 ---> Using cache
 ---> d72778127854
Step 4/14 : RUN apt-get upgrade -y
 ---> Using cache
 ---> 20be5ff7aa2d
Step 5/14 : RUN apt-get install -y xinetd
 ---> Using cache
 ---> fb2da76cd605
Step 6/14 : RUN DEBIAN_FRONTEND=noninteractive apt-get install -y python3 python3-pip
 ---> Using cache
 ---> a9cf8688cc1d
Step 7/14 : RUN pip install -U pip flask setuptools gunicorn
 ---> Using cache
 ---> 7cb0e26036e6
Step 8/14 : RUN useradd -m backend
 ---> Using cache
 ---> 9c748719127d
Step 9/14 : COPY src/backend/backend.py /backend/
 ---> Using cache
 ---> 63c4f204e16d
Step 10/14 : COPY src/backend/run_flag1.sh /backend/
 ---> Using cache
 ---> 6cc858091fb5
Step 11/14 : COPY src/backend/run_backend.sh /backend/
 ---> Using cache
 ---> 4c4f4e6f7bcd
Step 12/14 : COPY ./xinetd-flag1 /etc/xinetd.d/xinetd-flag1
 ---> Using cache
 ---> 2041a9c2fafd
Step 13/14 : USER backend
 ---> Using cache
 ---> 4498d366c131
Step 14/14 : CMD /usr/sbin/xinetd -dontfork & /backend/run_backend.sh
 ---> Using cache
 ---> 62d4eecf4fbb

Successfully built 62d4eecf4fbb
Successfully tagged sources_backend:latest
Building flag_market
Step 1/30 : FROM ubuntu:20.04
 ---> a0ce5a295b63
Step 2/30 : MAINTAINER how2hack
 ---> Using cache
 ---> b0e4016026ee
Step 3/30 : RUN apt-get update --fix-missing
 ---> Using cache
 ---> d72778127854
Step 4/30 : RUN apt-get upgrade -y
 ---> Using cache
 ---> 20be5ff7aa2d
Step 5/30 : RUN apt-get install -y xinetd
 ---> Using cache
 ---> fb2da76cd605
Step 6/30 : RUN DEBIAN_FRONTEND=noninteractive apt-get install -y git libtool pkg-config make python3 python3-pip help2man
 ---> Using cache
 ---> 4beb027e55b7
Step 7/30 : RUN pip install -U pip pycrypto
 ---> Using cache
 ---> 4e10206ad8b5
Step 8/30 : RUN useradd -m flag_market
 ---> Using cache
 ---> 89dd6d11f4f9
Step 9/30 : WORKDIR /home/flag_market
 ---> Using cache
 ---> ea11e3e3c215
Step 10/30 : RUN git clone https://github.com/frankmorgner/vsmartcard.git
 ---> Using cache
 ---> 283c2bf7db16
Step 11/30 : WORKDIR /home/flag_market/vsmartcard
 ---> Using cache
 ---> 6dd09ef1c5a8
Step 12/30 : RUN git checkout 8b4aa3e7bfe891d986237759576b5ebf0e4ed42b
 ---> Using cache
 ---> b4bd4b444499
Step 13/30 : COPY src/patch.diff /home/flag_market/vsmartcard/
 ---> Using cache
 ---> cc9bbebb7057
Step 14/30 : RUN git apply patch.diff
 ---> Using cache
 ---> 0da0587b90e2
Step 15/30 : WORKDIR /home/flag_market/vsmartcard/virtualsmartcard
 ---> Using cache
 ---> 5443e7b1d3c9
Step 16/30 : RUN autoreconf --verbose --install
 ---> Using cache
 ---> 51258865b582
Step 17/30 : RUN ./configure --sysconfdir=/etc --enable-libpcsclite
 ---> Using cache
 ---> 76c98ebe5e33
Step 18/30 : RUN make
 ---> Using cache
 ---> 2696fdbb2f6e
Step 19/30 : RUN make install
 ---> Using cache
 ---> 85e228010275
Step 20/30 : COPY src/flag_market /home/flag_market/
 ---> Using cache
 ---> 95e52cffed9c
Step 21/30 : COPY src/run.sh /home/flag_market/
 ---> Using cache
 ---> eb74aaf08cb9
Step 22/30 : COPY src/flag3 /home/flag_market/
 ---> Using cache
 ---> 3bc80753d487
Step 23/30 : RUN chmod 774 /tmp
 ---> Using cache
 ---> 247f491ebbec
Step 24/30 : RUN chmod -R 774 /var/tmp
 ---> Using cache
 ---> df4caf5f389a
Step 25/30 : RUN chmod -R 774 /dev
 ---> Using cache
 ---> 99a5ac366ae5
Step 26/30 : RUN chmod -R 774 /run
 ---> Using cache
 ---> b6be277053e9
Step 27/30 : RUN chmod 1733 /tmp /var/tmp /dev/shm
 ---> Using cache
 ---> 96142dd331bb
Step 28/30 : RUN chown -R root:root /home/flag_market
 ---> Using cache
 ---> 7a525faa9647
Step 29/30 : USER flag_market
 ---> Using cache
 ---> d57835bfbec7
Step 30/30 : CMD ["/home/flag_market/run.sh"]
 ---> Using cache
 ---> 39b924bc55dc

Successfully built 39b924bc55dc
Successfully tagged sources_flag_market:latest
Starting sources_flag_market_1 ... done
$ sudo docker ps
CONTAINER ID   IMAGE                 COMMAND                  CREATED       STATUS          PORTS                                                                                      NAMES
1f81014ffb0a   sources_flag_market   "/home/flag_market/r…"   2 hours ago   Up 10 seconds    0.0.0.0:1337->1337/tcp, :::1337->1337/tcp, 0.0.0.0:13337->19091/tcp, :::13337->19091/tcp  sources_flag_market_1
b16b80271ab2   sources_backend       "/bin/sh -c '/usr/sb…"   2 hours ago   Up 20 seconds                                                                                              sources_backend_1
$ sudo docker exec -it --workdir /root --user root sources_flag_market_1 sh -c "apt update && apt install gdbserver"
$ sudo docker exec -it sources_flag_market_1 ps -aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
flag_ma+     1  0.0  0.0   3980  2828 ?        Ss   22:22   0:00 /bin/bash /home
flag_ma+     7  0.0  0.0   2744   588 ?        S    22:22   0:00 timeout 1800 /h
flag_ma+     8  0.0  0.0   2412   600 ?        S    22:22   0:00 /home/flag_mark
flag_ma+   493  0.0  0.0   5896  2868 pts/0    Rs+  22:25   0:00 ps -aux
$ sudo docker exec -it sources_backend_1 ps -aux
USER       PID %CPU %MEM    VSZ   RSS TTY      STAT START   TIME COMMAND
backend      1  0.0  0.0   2612   580 ?        Ss   21:45   0:00 /bin/sh -c /usr
backend      7  0.0  0.0   3828  2416 ?        S    21:45   0:00 /usr/sbin/xinet
backend      8  0.0  0.0   3980  2788 ?        S    21:45   0:00 /bin/bash /back
backend      9  0.0  0.1  29384 24112 ?        S    21:45   0:00 /usr/bin/python
backend     11  0.0  0.1  37408 30800 ?        S    21:45   0:00 /usr/bin/python
backend     12  0.0  0.1  37408 30804 ?        S    21:45   0:00 /usr/bin/python
backend     13  0.0  0.1  37408 30800 ?        S    21:45   0:00 /usr/bin/python
backend     14  0.0  0.1  37408 30804 ?        S    21:45   0:00 /usr/bin/python
backend     21  0.0  0.0   5896  2800 pts/0    Rs+  22:25   0:00 ps -aux
$ sudo docker exec -it sources_flag_market_1 sh -c "gdbserver :1337 --attach \$(ps -aux | grep ':00 /home/flag_market/flag_market' | head -n 1 | awk '{print \$2}')"
Attached; pid = 8
Listening on port 1337
Remote debugging from host 192.168.48.1, port 55394
$ echo `ragg2 -P 2000 -r` | nc localhost 13337
$ r2 src/flag_market
[0x00001460]> wopO 0x414f45414e45414d
768
[0x00001460]> quit
```